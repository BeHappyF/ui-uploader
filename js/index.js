!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("regularjs")):"function"==typeof define&&define.amd?define(["Regular"],t):"object"==typeof exports?exports.RGUI=t(require("regularjs")):e.RGUI=t(e.Regular)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(8);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t._=t.Component=void 0;var s=n(3),a=o(s),r=n(7),i=o(r);t.Component=a["default"],t._=i["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=o(s),r=n(5),i=o(r),u=n(6),c=o(u),d=n(7),l=o(d),f=a["default"].extend({config:function(){this.defaults({readonly:!1,disabled:!1,visible:!0,"class":""}),this.supr()},defaults:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l["default"].defaults.apply(l["default"],[this.data].concat(t))},watch:function(){}}).filter(i["default"]).directive(c["default"]);t["default"]=f},function(t,n){t.exports=e},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.dateFormat=function(){var e=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e+="",e.length<=1?"0"+e:e},t={yyyy:function(e){return e.getFullYear()},MM:function(t){return e(t.getMonth()+1)},dd:function(t){return e(t.getDate())},HH:function(t){return e(t.getHours())},mm:function(t){return e(t.getMinutes())},ss:function(t){return e(t.getSeconds())}},n=new RegExp(Object.keys(t).join("|"),"g");return function(e){var o=arguments.length<=1||void 0===arguments[1]?"yyyy-MM-dd HH:mm":arguments[1];return e?(e=new Date(e),o.replace(n,function(n){return t[n]?t[n](e):""})):""}}(),n.format=function(e,t){for(var o=arguments.length,s=Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];return n[t+"Format"].apply(n,[e].concat(s))},t["default"]=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),a=o(s),r={};r["z-crt"]=a["default"].createBoolClassDirective("z-crt"),r["z-sel"]=a["default"].createBoolClassDirective("z-sel"),r["z-chk"]=a["default"].createBoolClassDirective("z-chk"),r["z-act"]=a["default"].createBoolClassDirective("z-act"),r["z-dis"]=a["default"].createBoolClassDirective("z-dis"),r["r-show"]=a["default"].createBoolDirective(function(e,t){e.style.display=t?"block":""}),r["r-autofocus"]=a["default"].createBoolDirective(function(e,t){t&&setTimeout(function(){return e.focus()},0)}),t["default"]=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=n(4),a={defaults:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}),e},createBoolDirective:function(e){return function(t,n){var s=this;"object"===("undefined"==typeof n?"undefined":o(n))&&"expression"===n.type?this.$watch(n,function(n,o){!n!=!o&&e.call(s,t,n)}):(n||""===n)&&e.call(this,t,!0)}},createBoolClassDirective:function(e){return a.createBoolDirective(function(t,n){s.dom[n?"addClass":"delClass"](t,e)})}};t["default"]=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Uploader=void 0;var s=n(9),a=o(s);t.Uploader=a["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=n(10),r=o(a),i={kB:1e3,MB:Math.pow(1e3,2),GB:Math.pow(1e3,3),TB:Math.pow(1e3,4)},u=s.Component.extend({name:"uploader",template:r["default"],config:function(){this.defaults({url:"",contentType:"multipart/form-data",dataType:"json",data:{},name:"file",extensions:null,maxSize:"",sending:!1,_id:(new Date).getTime()}),this.supr()},upload:function(){this.data.disabled||this.data.sending||this.$refs.file.click()},_checkExtensions:function(e){if(!this.data.extensions)return!0;var t=e.name,n=t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase(),o=this.data.extensions;return"string"==typeof o&&(o=o.split(",")),!!o.includes(n)||(this.$emit("error",{sender:this,name:"ExtensionError",message:"只能上传"+o.join(", ")+"类型的文件！",extensions:o}),!1)},_checkSize:function(e){if(!this.data.maxSize&&0!==this.data.maxSize)return!0;var t=void 0;if(isNaN(this.data.maxSize)){var n=this.data.maxSize.slice(-2);if(!i[n])throw new Error("Unknown unit!");t=this.data.maxSize.slice(0,-2)*i[n]}else t=+this.data.maxSize;return e.size<=t||(this.$emit("error",{sender:this,name:"SizeError",message:"文件大小超出限制！",maxSize:this.data.maxSize,size:e.size}),!1)},_submit:function(){var e=this.$refs.file.files?this.$refs.file.files[0]:{name:this.$refs.file.value,size:0};e&&e.name&&this._checkExtensions(e)&&this._checkSize(e)&&(this.data.sending=!0,this.$emit("sending",{sender:this,data:this.data.data}),this.$refs.form.submit())},_onLoad:function(){var e=this.$refs.iframe;if(this.data.sending){this.data.sending=!1;var t={};if(e.contentWindow?(t.responseText=e.contentWindow.document.body?e.contentWindow.document.body.innerText:null,t.responseXML=e.contentWindow.document.XMLDocument?e.contentWindow.document.XMLDocument:e.contentWindow.document):e.contentDocument&&(t.responseText=e.contentDocument.document.body?e.contentDocument.document.body.innerText:null,t.responseXML=e.contentDocument.document.XMLDocument?e.contentDocument.document.XMLDocument:e.contentDocument.document),!t.responseText)return this.$emit("error",{sender:this,name:"ResponseError",message:"No responseText!"});this.$emit("complete",{sender:this,xml:t}),this.$emit("success",{sender:this,data:this._parseData(t,this.data.dataType)})}},_parseData:function(e,t){if("text"===t)return e.responseText;if("xml"===t)return e.responseXML;if("json"===t){var n=e.responseText;try{n=JSON.parse(n)}catch(o){}return n}return e.responseText}});t["default"]=u},function(e,t){e.exports=[{type:"element",tag:"div",attrs:[{type:"attribute",name:"class",value:{type:"expression",body:"['u-uploader ',c._sg_('class', d, e)].join('')",constant:!1,setbody:!1}},{type:"attribute",name:"z-dis",value:{type:"expression",body:"c._sg_('disabled', d, e)",constant:!1,setbody:"c._ss_('disabled',p_,d, '=', 1)"}},{type:"attribute",name:"r-hide",value:{type:"expression",body:"(!c._sg_('visible', d, e))",constant:!1,setbody:!1}}],children:[{type:"text",text:"\n    "},{type:"element",tag:"div",attrs:[{type:"attribute",name:"on-click",value:{type:"expression",body:"c['upload']()",constant:!1,setbody:!1}}],children:[{type:"text",text:"\n        "},{type:"template",content:{type:"expression",body:"c._sg_('$body', c)",constant:!1,setbody:"c._ss_('$body',p_,c, '=', 0)"}},{type:"text",text:"\n    "}]},{type:"text",text:"\n    "},{type:"element",tag:"form",attrs:[{type:"attribute",name:"method",value:"POST"},{type:"attribute",name:"action",value:{type:"expression",body:"c._sg_('url', d, e)",constant:!1,setbody:"c._ss_('url',p_,d, '=', 1)"}},{type:"attribute",name:"target",value:{type:"expression",body:"['iframe',c._sg_('_id', d, e)].join('')",constant:!1,setbody:!1}},{type:"attribute",name:"enctype",value:{type:"expression",body:"c._sg_('contentType', d, e)",constant:!1,setbody:"c._ss_('contentType',p_,d, '=', 1)"}},{type:"attribute",name:"ref",value:"form"}],children:[{type:"text",text:"\n        "},{type:"if",test:{type:"expression",body:"(!c._sg_('sending', d, e))",constant:!1,setbody:!1},consequent:[{type:"text",text:"\n        \n        "},{type:"element",tag:"input",attrs:[{type:"attribute",name:"type",value:"file"},{type:"attribute",name:"name",value:{type:"expression",body:"c._sg_('name', d, e)",constant:!1,setbody:"c._ss_('name',p_,d, '=', 1)"}},{type:"attribute",name:"ref",value:"file"},{type:"attribute",name:"on-change",value:{type:"expression",body:"c['_submit']()",constant:!1,setbody:!1}}]},{type:"text",text:"\n        "}],alternate:[]},{type:"text",text:"\n        "},{type:"list",sequence:{type:"expression",body:"Object['keys'](c._sg_('data', d, e))",constant:!1,setbody:!1},alternate:[],variable:"key",body:[{type:"text",text:"\n        "},{type:"element",tag:"input",attrs:[{type:"attribute",name:"type",value:"hidden"},{type:"attribute",name:"name",value:{type:"expression",body:"c._sg_('key', d, e)",constant:!1,setbody:"c._ss_('key',p_,d, '=', 1)"}},{type:"attribute",name:"value",value:{type:"expression",body:"c._sg_(c._sg_('key', d, e), c._sg_('data', d, e))",constant:!1,setbody:"c._ss_(c._sg_('key', d, e),p_,c._sg_('data', d, e), '=', 0)"}}]},{type:"text",text:"\n        "}]},{type:"text",text:"\n    "}]},{type:"text",text:"\n    "},{type:"element",tag:"iframe",attrs:[{type:"attribute",name:"name",value:{type:"expression",body:"['iframe',c._sg_('_id', d, e)].join('')",constant:!1,setbody:!1}},{type:"attribute",name:"on-load",value:{type:"expression",body:"c['_onLoad']()",constant:!1,setbody:!1}},{type:"attribute",name:"ref",value:"iframe"}]},{type:"text",text:"\n"}]}]}])});